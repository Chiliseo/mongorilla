{
    "mongo": {
        "url": ""
    },
    "s3": {
        "bucket": "mongorilla"
    },
    "project_name": "Mongorilla CMS Example",
    "roles": [
        {
            "name": "root",
            "permissions": {
                "user": "crud",
                "company": "crud"
            }
        },
        {
            "name": "editor",
            "permissions": {
                "user": "",
                "company": "cru"
            }
        }
    ],
    "users": [
        { "username": "test", "password": "123", "fullname": "Test User", "roles": ["editor"] },
        { "username": "admin", "password": "123", "fullname": "Administrator", "roles": ["root", "editor"] }
    ],
    "collections": [
        {
            "name": "user",
            "humanName": "User",
            "previewUrl": "http://example.com/${uri}.html",
            "backboneForms": {
                "schema": {
                    "fullname": { "type": "Text", "title": "Full Name", "validators": ["required"] },
                    "firstname": { "type": "Text", "title": "First Name", "validators": ["required"] },
                    "lastname": { "type": "Text", "title": "Last Name", "validators": ["required"] },
                    "twitter.username": { "type": "Text", "title": "Twitter Usename", "help": "e.g. @pepe" },
                    "github.username": { "type": "Text", "title": "GitHub Usename", "help": "e.g. pepe" },
                    "dob": { "type": "Date", "title": "Day of Birth" },
                    "death_year": { "type": "Number", "title": "Death Year" },
                    "bio": { "type": "CKEditor", "title": "Bio" },
                    "website_url": { "type": "Text", "validators": ["required", "url"], "title": "Website URL", "help": "please, include http:// prefix" },
                    "photo": { "type": "Image", "title": "Photo", "pushToS3": true },
                    "other_photos": { "type": "List", "itemType": "Image", "title": "Other Photos", "pushToS3": true },
                    "cv": { "type": "File", "title": "Curriculum Vitae", "pushToS3": true },
                    "company": { "type": "ObjectId", "title": "Actual Company", "validators": ["required"] },
                    "previous_companies": { "type": "List", "itemType": "ObjectId", "title": "Previous Companies" },
                    "uri": {
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$"] }
                            }
                        ] 
                    }
                },
                "fieldsets": [
                    {
                        "legend": "Basic Information",
                        "fields": ["fullname", "firstname", "lastname", "dob", "photo", "other_photos"]
                    },
                    {
                        "legend": "About",
                        "fields": ["github.username", "twitter.username", "bio", "website_url"]
                    },
                    {
                        "legend": "Work",
                        "fields": ["cv", "company", "previous_companies"]
                    },
                    {
                        "legend": "System Data",
                        "fields": ["uri"]
                    }
                ],
                "defaults": {
                }
            },
            "toStringField": "fullname",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "fullname": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["lastname", "firstname", "uri", "created", "updated"]
            },
            "relations": { 
                "photo": {
                    "type": "HasOne",
                    "relatedCollection": "fs.files"
                },
                "other_photos": {
                    "type": "HasMany",
                    "relatedCollection": "fs.files"
                },
                "cv": {
                    "type": "HasOne",
                    "relatedCollection": "fs.files"
                },
                "company": {
                    "type": "HasOne",
                    "relatedCollection": "company"
                },
                "previous_companies": {
                    "type": "HasMany",
                    "relatedCollection": "company"
                }
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "company",
            "humanName": "Company",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name", "validators": ["required"] },
                    "description": { "type": "CKEditor", "title": "Description" },
                    "uri": {
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$"] }
                            }
                        ] 
                    }
                }
            },
            "relations": { 
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        }
    ]
}
