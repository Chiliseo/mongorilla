{
    "project_name": "Damusiq CMS",
    "s3": {
        "bucket": "mongorilla"
    },
    "roles": [
        {
            "name": "editor",
            "permissions": {
                "composer": "crud",
                "composerCategory": "crud",
                "instrument": "crud",
                "opus": "crud",
                "period": "crud",
                "score": "crud"
            }
        }
    ],
    "users": [
        { "username": "pbort", "password": "5ap1t0!A", "fullname": "Pablo Bort", "roles": ["editor"] },
        { "username": "gbort", "password": "5ap1t0!B", "fullname": "Gerardo Bort", "roles": ["editor"] }
    ],
    "collections": [
        {
            "name": "composer",
            "humanName": "Composer",
            "previewUrl": "http://damusiq.com/${uri}.html",
            "backboneForms": {
                "schema": {
                    "fullname": { "type": "Text", "title": "Full Name", "validators": ["required"] },
                    "firstname": { "type": "Text", "title": "First Name", "validators": ["required"] },
                    "lastname": { "type": "Text", "title": "Last Name", "validators": ["required"] },
                    "birth_year": { "type": "Number", "title": "Birth Year" },
                    "death_year": { "type": "Number", "title": "Death Year" },
                    "wiki.en.source_url": { "type": "Text", "title": "Source URL" },
                    "wiki.en.source_name": { "type": "Text", "title": "Source Name" },
                    "wiki.en.content": { "type": "CKEditor", "title": "Content" },
                    "wiki.es.source_url": { "type": "Text", "title": "Source URL" },
                    "wiki.es.source_name": { "type": "Text", "title": "Source Name" },
                    "wiki.es.content": { "type": "CKEditor", "title": "Content" },
                    "wiki.it.source_url": { "type": "Text", "title": "Source URL" },
                    "wiki.it.source_name": { "type": "Text", "title": "Source Name" },
                    "wiki.it.content": { "type": "CKEditor", "title": "Content" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    },
                    "images": { "type": "List", "itemType": "Text", "title": "Image (URL)", "validators": ["url"] },
                    "categories": { "type": "List", "itemType": "ObjectId", "title": "Categories" },
                    "periods": { "type": "List", "itemType": "ObjectId", "title": "Periods" },
                    "opuses": { "type": "List", "itemType": "ObjectId", "title": "Opuses" }
                },
                "fieldsets": [
                    {
                        "legend": "Basic Information",
                        "fields": ["fullname", "firstname", "lastname", "birth_year", "death_year", "images"]
                    },
                    {
                        "legend": "English Content",
                        "fields": ["wiki.en.content", "wiki.en.source_name", "wiki.en.source_url"]
                    },
                    {
                        "legend": "Spanish Content",
                        "fields": ["wiki.es.content", "wiki.es.source_name", "wiki.es.source_url"]
                    },
                    {
                        "legend": "Italian Content",
                        "fields": ["wiki.it.content", "wiki.it.source_name", "wiki.it.source_url"]
                    },
                    {
                        "legend": "System Data",
                        "fields": ["uri"]
                    },
                    {
                        "legend": "Content Relations",
                        "fields": ["categories", "periods", "opuses"]
                    }
                ],
                "defaults": {
                    "birth_year": 1800,
                    "death_year": 1890
                }
            },
            "toStringField": "fullname",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "fullname": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["lastname", "firstname", "uri", "created", "updated"]
            },
            "relations": {
                "categories": {
                    "type": "HasMany",
                    "relatedCollection": "composerCategory"
                },
                "periods": {
                    "type": "HasMany",
                    "relatedCollection": "period"
                },
                "opuses": {
                    "type": "HasMany",
                    "relatedCollection": "opus"
                }
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "composerCategory",
            "humanName": "Composer Category",
            "previewUrl": "http://damusiq.com/composers/${uri}.html",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name", "validators": ["required"] },
                    "description": { "type": "CKEditor", "title": "Description" },
                    "lang": { "type": "Text", "title": "Language ISO" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    },
                    "count": { "type": "Number", "title": "Composers Amount", "editorAttrs": { "disabled": "disabled" } }
                }
            },
            "relations": {
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri", "count", "created", "updated"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "instrument",
            "humanName": "Instrument",
            "previewUrl": "http://damusiq.com/instruments/${uri}.html",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name (English)", "validators": ["required"] },
                    "t.name.es": { "type": "Text", "title": "Name (Spanish)" },
                    "t.name.it": { "type": "Text", "title": "Name (Italian)" },
                    "description": { "type": "CKEditor", "title": "Description (English)" },
                    "t.description.es": { "type": "CKEditor", "title": "Description (Spanish)" },
                    "t.description.it": { "type": "CKEditor", "title": "Description (Italian)" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    }
                },
                "fieldsets": [
                    {
                        "legend": "English Content",
                        "fields": ["name", "description"]
                    },
                    {
                        "legend": "Spanish Translation",
                        "fields": ["t.name.es", "t.description.es"]
                    },
                    {
                        "legend": "Italian Translation",
                        "fields": ["t.name.it", "t.description.it"]
                    },
                    {
                        "legend": "System Data",
                        "fields": ["uri"]
                    }
                ]
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri", "created", "updated"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "opus",
            "humanName": "Opus",
            "previewUrl": "http://damusiq.com/${composer.uri}/${uri}.html",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name", "validators": ["required"] },
                    "description": { "type": "CKEditor" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    },
                    "composer": { "type": "ObjectId", "title": "Composer" }
                }
            },
            "relations": {
                "composer": {
                    "type": "HasOne",
                    "relatedCollection": "composer"
                }
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri", "created", "updated"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "period",
            "humanName": "Period",
            "previewUrl": "http://damusiq.com/periods/${uri}.html",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name (English)", "validators": ["required"] },
                    "t.name.es": { "type": "Text", "title": "Name (Spanish)" },
                    "t.name.it": { "type": "Text", "title": "Name (Italian)" },
                    "description": { "type": "CKEditor", "title": "Description (English)" },
                    "t.description.es": { "type": "CKEditor", "title": "Description (Spanish)" },
                    "t.description.it": { "type": "CKEditor", "title": "Description (Italian)" },
                    "wiki_url": { "type": "Text", "title": "Wiki URL (English)" },
                    "t.wiki_url.es": { "type": "Text", "title": "Wiki URL (Spanish)" },
                    "t.wiki_url.it": { "type": "Text", "title": "Wiki URL (Italian)" },
                    "from_year": { "type": "Number", "title": "From (Year)" },
                    "to_year": { "type": "Number", "title": "To (Year)" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    },
                    "order_index": { "type": "Number", "title": "Sort Number" }
                },
                "fieldsets": [
                    {
                        "legend": "English Content",
                        "fields": ["name", "description", "wiki_url"]
                    },
                    {
                        "legend": "Spanish Translation",
                        "fields": ["t.name.es", "t.description.es", "t.wiki_url.es"]
                    },
                    {
                        "legend": "Italian Translation",
                        "fields": ["t.name.it", "t.description.it", "t.wiki_url.es"]
                    },
                    {
                        "legend": "System Data",
                        "fields": ["uri", "from_year", "to_year", "order_index"]
                    }
                ]
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri", "created", "updated"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        },
        {
            "name": "score",
            "humanName": "Score",
            "previewUrl": "http://damusiq.com/${composer.uri}/${opus.uri}/${_id}.html",
            "backboneForms": {
                "schema": {
                    "name": { "type": "Text", "title": "Name", "validators": ["required"] },
                    "description": { "type": "CKEditor" },
                    "uri": {
                        "type": "Text",
                        "validators": [
                            "required",
                            {
                                "type": "regexp",
                                "regexp": { "__constructor": "RegExp", "__arguments": ["^[0-9a-z-]{2,}[0-9a-z]$", "g"] }
                            }
                        ], 
                        "editorAttrs": { "disabled": "disabled" }
                    },
                    "composer": { "type": "ObjectId", "title": "Composer" },
                    "opus": { "type": "ObjectId", "title": "Opus" },
                    "instruments": { "type": "List", "itemType": "ObjectId", "title": "Instruments" },
                    "order_index": { "type": "Text", "title": "Sort String", "editorAttrs": { "disabled": "disabled" } }
                }
            },
            "relations": {
                "composer": {
                    "type": "HasOne",
                    "relatedCollection": "composer"
                },
                "opus": {
                    "type": "HasOne",
                    "relatedCollection": "opus"
                },
                "instruments": {
                    "type": "HasMany",
                    "relatedCollection": "instrument"
                }
            },
            "toStringField": "name",
            "updatedField": { "key": "updated", "type": "Date" },
            "createdField": { "key": "created", "type": "Date" },
            "fastSearch": {
                "find": { "name": { "__constructor": "RegExp", "__arguments": ["(^|\\W*)${q}", "ig"] } },
                "sort": { "updated": -1 },
                "limit": 10,
                "columns": ["name", "uri", "created", "updated"]
            },
            "mongoose": {
                "schema": null
            },
            "readonly": false,
            "revisionable": true
        }
    ]
}
